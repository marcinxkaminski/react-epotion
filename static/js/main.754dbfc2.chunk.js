(this["webpackJsonpreact-epotion"]=this["webpackJsonpreact-epotion"]||[]).push([[0],{31:function(e,n){},32:function(e,n){},33:function(e,n){},35:function(e,n,t){"use strict";t.r(n);var r=t(2),i=t(18),o=t(5),a=t.n(o),c=t(15),s=t.n(c),u=t(12),l=t.n(u),b=t(16),d=t(8),p=t(3),j=t(17),h=t(7);function f(){return(f=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var m,g=function(){return window.location.href.split("?")[0]},x="https://epotion-api.herokuapp.com",O=function(e){try{return Promise.resolve(fetch(x+"/events",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).then((function(e){return Promise.resolve(e.json()).then((function(e){return e.id}))}))}catch(e){return Promise.reject(e)}},v="reported",y="tracked",k=Object(j.a)(),w=function(e){void 0===e&&(e={});var n={key:"",value:0};return Object.entries(e).forEach((function(e){var t=e[1];t>n.value&&(n.key=e[0],n.value=t)})),n},P="https://marcinxkaminski.github.io/Trash/",N=[],T=function(){try{return Promise.resolve(h.c.tinyFaceDetector.loadFromUri(P)).then((function(){return Promise.resolve(h.c.faceExpressionNet.loadFromUri(P)).then((function(){return Promise.resolve(h.c.ageGenderNet.loadFromUri(P)).then((function(){}))}))}))}catch(e){return Promise.reject(e)}},F=function(e,n){void 0===n&&(n=!0);try{return Promise.resolve(function(){try{return Promise.resolve(new Promise((function(e,n){var t,r=document.createElement("video");r.addEventListener("playing",(function(){var n,t=r.videoHeight/(r.videoWidth/1280),i=document.createElement("canvas");i.setAttribute("width",1280),i.setAttribute("height",t),i.getContext("2d").drawImage(r,0,0,1280,t),null==(n=r.srcObject)||n.getVideoTracks().forEach((function(e){return e.stop()}));var o=new Image;o.src=i.toDataURL("image/jpeg",1),e(o)})),(null==(t=navigator.mediaDevices)?void 0:t.getUserMedia({video:!0})).then((function(e){r.srcObject=e,r.play()})).catch(n)}))).then((function(e){return Promise.resolve(function(e){try{return Promise.resolve(Object(h.b)(e,new h.a).withFaceExpressions().withAgeAndGender()).then((function(e){var n=e||{},t=n.age,r=n.gender;return{emotion:w(n.expressions).key,age:Math.round(t),gender:r}}))}catch(e){return Promise.reject(e)}}(e)).then((function(n){return{data:n,image:e}}))}))}catch(e){return Promise.reject(e)}}()).then((function(t){var r=t.data,i=t.image;return Promise.resolve(function(){try{return Promise.resolve(fetch("https://freegeoip.app/json/")).then((function(e){return Promise.resolve(e.json()).then((function(e){return{country:e.country_name,city:e.city}}))}))}catch(e){return Promise.reject(e)}}()).then((function(t){var o=f({},r,t,{url:g()});k.emit(y,f({},o,{image:i})),console.log("111111!",i,o),o.emotion&&n&&(console.log("22222! "),function(e,n){void 0===e&&(e=O);try{Promise.resolve(e(n)).then((function(e){N.push(e),k.emit(v,f({},n,{id:e}))}))}catch(e){return Promise.reject(e)}}(e,f({},o,{image:i})))}))}))}catch(e){return Promise.reject(e)}},S=k.on,E=t(4);function M(){var e=Object(E.a)(["\n  font-size: 65px;\n"]);return M=function(){return e},e}function A(){var e=Object(E.a)(["\n  color: #03dac6;\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return A=function(){return e},e}function z(){var e=Object(E.a)(["\n  font-size: 0.9em;\n  margin: 20px 0;\n  height: 80px;\n  text-align: justify;\n"]);return z=function(){return e},e}function C(){var e=Object(E.a)(["\n  text-transform: uppercase;\n  letter-spacing: 0.4em;\n  font-size: 1.3em;\n  vertical-align: bottom;\n  height: 25px;\n  display: inline;\n"]);return C=function(){return e},e}function R(){var e=Object(E.a)(["\n  margin: 20px 0;\n"]);return R=function(){return e},e}function U(){var e=Object(E.a)(["\n  background: #b00020;\n"]);return U=function(){return e},e}function _(){var e=Object(E.a)(["\n  width: 160px;\n  height: 35px;\n  display: inline-block;\n  font-size: 1em;\n  border-radius: 20px;\n  background: #03dac6;\n  margin: 10px 0;\n  line-height: 2.15;\n  transition: all 0.3s ease-in-out;\n  input {\n    display: none;\n  }\n"]);return _=function(){return e},e}function I(){var e=Object(E.a)(["\n  text-align: right;\n  padding: 0;\n  button {\n    padding: 0 0.5em;\n  }\n"]);return I=function(){return e},e}function q(){var e=Object(E.a)(["\n  width: 250px;\n  height: 250px;\n  padding: 15px;\n  border-radius: 20px;\n"]);return q=function(){return e},e}function D(){var e=Object(E.a)(["\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  font-size: 25px;\n  -webkit-transition: all 0.3s ease-in-out;\n  transition: all 0.3s ease-in-out;\n  &:hover {\n    box-shadow: none;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }\n"]);return D=function(){return e},e}function J(){var e=Object(E.a)(["\n  position: absolute;\n  z-index: ",";\n  right: 50px;\n  bottom: 50px;\n  color: #fff;\n  text-align: center;\n  background: #121212;\n  font-family: 'Arial';\n  -webkit-box-shadow: 0px 15px 35px 0px rgba(0, 0, 0, 0.4);\n  -moz-box-shadow: 0px 15px 35px 0px rgba(0, 0, 0, 0.4);\n  box-shadow: 0px 15px 35px 0px rgba(0, 0, 0, 0.4);\n"]);return J=function(){return e},e}function L(){var e=Object(E.a)(["\n  border: none;\n  color: #fff;\n  outline: none;\n  background: #121212;\n  cursor: pointer;\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return L=function(){return e},e}function G(){var e=Object(E.a)(["\n  vertical-align: 'top';\n"]);return G=function(){return e},e}function H(){var e=Object(E.a)(["\n  text-align: center;\n"]);return H=function(){return e},e}var W=Object(p.a)(H()),K=Object(p.a)(G()),V=Object(p.a)(L()),X=Object(p.a)(J(),Number.MAX_SAFE_INTEGER),B=Object(p.a)(D()),Q=Object(p.a)(q()),Y=Object(p.a)(I()),Z=Object(p.a)(_()),$=Object(p.a)(U()),ee=Object(p.a)(R()),ne=Object(p.a)(C()),te=Object(p.a)(z()),re=Object(p.a)(A()),ie=Object(p.a)(M()),oe=function(e){switch(e){case"neutral":return Object(r.jsx)("span",{role:"img","aria-label":"Expressionless Face emoji",children:"\ud83d\ude11"});case"happy":return Object(r.jsx)("span",{role:"img","aria-label":"Smiling Face with Smiling Eyes emoji",children:"\ud83d\ude0a"});case"sad":return Object(r.jsx)("span",{role:"img","aria-label":"Slightly Frowning Face emoji",children:"\ud83d\ude41"});case"angry":return Object(r.jsx)("span",{role:"img","aria-label":"Angry Face emoji",children:"\ud83d\ude20"});case"fearful":return Object(r.jsx)("span",{role:"img","aria-label":"Fearful Face emoji",children:"\ud83d\ude28"});case"disgusted":return Object(r.jsx)("span",{role:"img","aria-label":"Nauseated Face emoji",children:"\ud83e\udd22"});case"surprised":return Object(r.jsx)("span",{role:"img","aria-label":"Face with Open Mouth emoji",children:"\ud83d\ude2e"});default:return Object(r.jsx)("span",{role:"img","aria-label":"Robot Face emoji",children:"\ud83e\udd16"})}},ae=function(){return Object(r.jsx)("span",{role:"img","aria-label":"Potion emoji",children:"\ud83e\uddea"})},ce=function(e){var n=e.minimized,t=e.text,i=e.readMoreText,a=e.readMoreUrl,c=e.startTrackingText,s=e.stopTrackingText,u=e.customReporter,j=e.enableReporting,h=Object(o.useState)(!0),f=Object(d.a)(h,2),g=f[0],x=f[1],O=Object(o.useState)(n),v=Object(d.a)(O,2),k=v[0],w=v[1],P=Object(o.useState)(),N=Object(d.a)(P,2),E=N[0],M=N[1],A=Object(o.useState)(),z=Object(d.a)(A,2),C=z[0],R=z[1];Object(o.useEffect)((function(){(function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),S(y,(function(e){var n=e.emotion;return R(n)}))}),[]);return g?k?Object(r.jsxs)("button",{className:Object(p.a)(X,V,B),onClick:function(){return w(!1)},children:[!E&&ae(),E&&oe(C)]}):Object(r.jsxs)("div",{className:Object(p.a)(X,Q),children:[Object(r.jsxs)("div",{className:Y,children:[Object(r.jsx)("button",{className:Object(p.a)(V,K),onClick:function(){return w(!0)},children:"_"}),Object(r.jsx)("button",{className:V,onClick:function(){return x(!1)},children:"x"})]}),Object(r.jsxs)("div",{className:ee,children:[Object(r.jsx)("h1",{className:ne,children:"Epotion"}),ae()]}),!E&&Object(r.jsxs)("p",{className:te,children:["".concat(t," "),Object(r.jsx)("a",{className:re,target:"__blank",href:a,children:i})]}),E&&Object(r.jsx)("div",{className:Object(p.a)(te,W,ie),children:oe(C)}),Object(r.jsxs)("label",{className:Object(p.a)(V,Z,E&&$),children:[Object(r.jsx)("input",{type:"checkbox",onChange:function(e){var n,t,r,i=e.target.checked;i?(n=u,void 0===(t=j)&&(t=!0),void 0===r&&(r=30),m=setInterval((function(){return F(n,t)}),1e3*r)):m&&clearInterval(m),M(i)},checked:E}),Object(r.jsx)("span",{children:E?s:c})]})]}):null};ce.defaultProps={minimized:!1,text:"Allow us to track your emotions while you browse the page so we could provide you with better user experience. Data is collected anonymously.",readMoreText:"Click here to read more.",readMoreUrl:"https://marcinxkaminski.github.io/epotion-api/epotion.html",startTrackingText:"\ud83d\ude80 start tracking",stopTrackingText:"\u270b\ud83c\udffb stop tracking",enableReporting:!0};var se=ce;s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(se,{customReporter:function(e){var n=e.image,t=Object(i.a)(e,["image"]);console.log("NO KURWA!"),document.querySelector("#result").innerHTML=JSON.stringify(t,void 0,4),document.querySelector("#photo-container").innerHTML="",document.querySelector("#photo-container").appendChild(n)}})}),document.querySelector("#root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.754dbfc2.chunk.js.map